import sys,os

sys.path.append(os.getcwd())
sys.path.append(os.path.dirname(os.path.dirname(__file__)))
from example import constent
from example.green_power import solve

def main(load):
    evol = solve(load)

    run = {sp_day:{constent.ENGLISH_DICT[constent.FEATURE_RUN_COLUME[i]]:run[17:]+run[:17] for i,run in enumerate(zip(*evol[0].feature_run[sp_day]))} for sp_day in constent.SPECIAL_9DAYS.keys()}
    for v in run.values():
        v.pop(constent.ENGLISH_DICT['典型日种类'])
        v.pop(constent.ENGLISH_DICT['时间'])
        
    return_val = {'run':run,
        'plan':{constent.ENGLISH_DICT[n]:v for n,v in zip(constent.FEATURE_PLAN_COLUME,evol[0].feature_plan)},
        'result':{'obj':evol[0].objectives[0],'dis_co2':evol[0].dis_co2,'economic':evol[0].economic}}

    return return_val

if __name__=='__main__':
    load = {"workday": [30710.359865684313, 32424.963504136176, 26343.31836691784, 23402.050858972714, 31466.139246456245, 29404.1820705795, 32072.02460211823, 32745.146735856084, 31052.116954890793, 29286.697766835285, 33463.946078774075, 29636.647781847056, 39758.90971421667, 40463.81936424404, 24116.691469570425, 35138.40331794309, 2135.296922648603, 5151.845589285519, 6404.293285631984, 6217.690324626677, 5703.2162531203785, 8958.08853133498, 6629.073407347482, 4996.452096458904],
            "weekend": [30710.359865684313, 32424.963504136176, 26343.31836691784, 23402.050858972714, 31466.139246456245, 29404.1820705795, 32072.02460211823, 32745.146735856084, 31052.116954890793, 29286.697766835285, 33463.946078774075, 29636.647781847056, 39758.90971421667, 40463.81936424404, 24116.691469570425, 35138.40331794309, 2135.296922648603, 5151.845589285519, 6404.293285631984, 6217.690324626677, 5703.2162531203785, 8958.08853133498, 6629.073407347482, 4996.452096458904],
            "holiday": [30710.359865684313, 32424.963504136176, 26343.31836691784, 23402.050858972714, 31466.139246456245, 29404.1820705795, 32072.02460211823, 32745.146735856084, 31052.116954890793, 29286.697766835285, 33463.946078774075, 29636.647781847056, 39758.90971421667, 40463.81936424404, 24116.691469570425, 35138.40331794309, 2135.296922648603, 5151.845589285519, 6404.293285631984, 6217.690324626677, 5703.2162531203785, 8958.08853133498, 6629.073407347482, 4996.452096458904]}
    
    # load = {"workday": [0 for _ in range(24)],
    #         "weekend": [0 for _ in range(24)],
    #         "holiday": [0 for _ in range(24)]}
    result = main(load)
    print(result)




